# æ•°æ®åº“è®¾ç½®å’Œæ•°æ®å¡«å……æŒ‡å—

## ç¬¬ä¸€æ­¥ï¼šåˆ›å»º Vercel Postgres æ•°æ®åº“

1. **è®¿é—® Vercel Dashboard**
   - ç½‘å€: https://vercel.com/dashboard
   - é€‰æ‹©ä½ çš„é¡¹ç›®: `x402-mcp-server`

2. **åˆ›å»º Postgres æ•°æ®åº“**
   - ç‚¹å‡»é¡¶éƒ¨çš„ **Storage** æ ‡ç­¾
   - ç‚¹å‡» **Create Database** æŒ‰é’®
   - é€‰æ‹© **Postgres**
   - å¡«å†™ä¿¡æ¯:
     - Database Name: `x402-analytics`
     - Region: é€‰æ‹©ç¦»ä½ æœ€è¿‘çš„åŒºåŸŸï¼ˆå»ºè®® US Westï¼‰
   - ç‚¹å‡» **Create** æŒ‰é’®

3. **è¿æ¥æ•°æ®åº“åˆ°é¡¹ç›®**
   - æ•°æ®åº“åˆ›å»ºåï¼ŒVercel ä¼šè‡ªåŠ¨æ·»åŠ ç¯å¢ƒå˜é‡
   - ç¯å¢ƒå˜é‡ä¼šè‡ªåŠ¨æ³¨å…¥åˆ°ä½ çš„é¡¹ç›®ä¸­
   - åŒ…æ‹¬: `POSTGRES_URL`, `POSTGRES_PRISMA_URL` ç­‰

4. **ç­‰å¾…æ•°æ®åº“å°±ç»ª**
   - å¤§çº¦éœ€è¦ 1-2 åˆ†é’Ÿ
   - çŠ¶æ€æ˜¾ç¤ºä¸º "Ready" åå³å¯ä½¿ç”¨

## ç¬¬äºŒæ­¥ï¼šåˆå§‹åŒ–æ•°æ®åº“è¡¨ç»“æ„

åˆ›å»ºæ•°æ®åº“åï¼Œè®¿é—®ä»¥ä¸‹ URL æ¥åˆ›å»ºå¿…è¦çš„è¡¨ï¼š

```bash
https://x402-mcp-server.vercel.app/api/admin/init-database?secret=x402-admin-2024
```

**æœŸæœ›è¾“å‡º**:
```json
{
  "success": true,
  "message": "æ•°æ®åº“åˆå§‹åŒ–æˆåŠŸ",
  "stats": {
    "payments": 0,
    "api_calls": 0
  },
  "logs": "..."
}
```

## ç¬¬ä¸‰æ­¥ï¼šå¡«å……æ¨¡æ‹Ÿæ•°æ®

åˆå§‹åŒ–å®Œæˆåï¼Œè®¿é—®ä»¥ä¸‹ URL æ¥ç”Ÿæˆè¿‡å» 30 å¤©çš„æ¨¡æ‹Ÿæ•°æ®ï¼š

```bash
https://x402-mcp-server.vercel.app/api/admin/seed-data?secret=x402-admin-2024&clear=true
```

**å‚æ•°è¯´æ˜**:
- `secret`: ç®¡ç†å‘˜å¯†é’¥ï¼ˆé»˜è®¤: `x402-admin-2024`ï¼‰
- `clear=true`: æ¸…ç©ºç°æœ‰æ•°æ®å¹¶é‡æ–°å¡«å……ï¼ˆå¯é€‰ï¼‰

**æœŸæœ›è¾“å‡º**:
```json
{
  "success": true,
  "message": "æ•°æ®å¡«å……æˆåŠŸ",
  "stats": {
    "api_calls": 2100,
    "payments": 600,
    "revenue": "12.50",
    "days": 30
  },
  "logs": "..."
}
```

## ç¬¬å››æ­¥ï¼šæŸ¥çœ‹ç»Ÿè®¡æ•°æ®

è®¿é—®ç®¡ç†ä»ªè¡¨æ¿æŸ¥çœ‹æ•°æ®ï¼š

```bash
https://x402-mcp-server.vercel.app/public/dashboard.html
```

æˆ–è€…é€šè¿‡ API æŸ¥çœ‹ç»Ÿè®¡ï¼š

```bash
https://x402-mcp-server.vercel.app/api/admin/stats
```

## ç”Ÿæˆçš„æ•°æ®è¯´æ˜

å¡«å……å·¥å…·ä¼šç”Ÿæˆä»¥ä¸‹æ•°æ®ï¼š

### æ—¶é—´èŒƒå›´
- è¿‡å» 30 å¤©çš„å†å²æ•°æ®
- æ•°æ®å¢é•¿è¶‹åŠ¿ï¼ˆè¶Šè¿‘æœŸæ•°æ®è¶Šå¤šï¼‰

### API è°ƒç”¨
- **å…è´¹è°ƒç”¨**: æ¯å¤©çº¦ 50 æ¬¡ï¼ˆéšå¢é•¿å› å­å˜åŒ–ï¼‰
- **ä»˜è´¹è°ƒç”¨**: æ¯å¤©çº¦ 20 æ¬¡ï¼ˆéšå¢é•¿å› å­å˜åŒ–ï¼‰
- **æˆåŠŸç‡**: å…è´¹ 95%ï¼Œä»˜è´¹ 99%
- **å“åº”æ—¶é—´**: 100-5000msï¼ˆæ­£æ€åˆ†å¸ƒï¼Œå‡å€¼ 800msï¼‰

### ä½¿ç”¨æ¨¡å¼
- **ç™½å¤©é«˜å³°**: 8:00-22:00 è°ƒç”¨é‡æ˜¯å…¶ä»–æ—¶é—´çš„ 3 å€
- **ç«¯ç‚¹åˆ†å¸ƒ**:
  - tokens/price: 40%
  - tokens/prices/multichain: 25%
  - pools/analytics: 20%
  - transactions/whales: 10%
  - contracts/safety: 5%

### æ”¯ä»˜æ•°æ®
- **é“¾åˆ†å¸ƒ**: Ethereum, Base, Polygon, Arbitrum å‡åŒ€åˆ†å¸ƒ
- **é‡‘é¢æµ®åŠ¨**: Â±5% çš„ä»·æ ¼æµ®åŠ¨ï¼ˆæ¨¡æ‹ŸçœŸå® Gas è´¹ç”¨ï¼‰
- **ä»£å¸**: ä¸»è¦ä½¿ç”¨ WETH
- **éªŒè¯ç‡**: 100%ï¼ˆæ‰€æœ‰æ”¯ä»˜å·²éªŒè¯ï¼‰

## å®‰å…¨è®¾ç½®ï¼ˆå¯é€‰ï¼‰

ä¿®æ”¹ç®¡ç†å‘˜å¯†é’¥ï¼š

1. åœ¨ Vercel Dashboard â†’ é¡¹ç›® â†’ Settings â†’ Environment Variables
2. æ·»åŠ æ–°å˜é‡:
   - Name: `ADMIN_SECRET`
   - Value: `ä½ çš„æ–°å¯†é’¥`ï¼ˆå»ºè®®ä½¿ç”¨éšæœºå­—ç¬¦ä¸²ï¼‰
3. ä¿å­˜å¹¶é‡æ–°éƒ¨ç½²

ä¹‹åä½¿ç”¨æ–°å¯†é’¥è®¿é—®:
```bash
https://x402-mcp-server.vercel.app/api/admin/seed-data?secret=ä½ çš„æ–°å¯†é’¥
```

## å¸¸è§é—®é¢˜

### Q: æ˜¾ç¤º "missing_connection_string" é”™è¯¯
**A**: Postgres æ•°æ®åº“æœªåˆ›å»ºæˆ–æœªè¿æ¥ã€‚è¿”å›ç¬¬ä¸€æ­¥é‡æ–°åˆ›å»ºæ•°æ®åº“ã€‚

### Q: æ˜¾ç¤º "relation does not exist" é”™è¯¯
**A**: è¡¨ç»“æ„æœªåˆ›å»ºã€‚è®¿é—® `/api/admin/init-database` åˆå§‹åŒ–æ•°æ®åº“ã€‚

### Q: æƒ³è¦é‡æ–°ç”Ÿæˆæ•°æ®
**A**: è®¿é—® `/api/admin/seed-data?secret=YOUR_SECRET&clear=true`ï¼ˆå¸¦ `clear=true` å‚æ•°ï¼‰

### Q: å¦‚ä½•æŸ¥çœ‹å®æ—¶æ•°æ®
**A**:
- ä»ªè¡¨æ¿: https://x402-mcp-server.vercel.app/public/dashboard.html
- API ç»Ÿè®¡: https://x402-mcp-server.vercel.app/api/admin/stats

### Q: æ•°æ®ä¼šä¸ä¼šå¤ªå‡
**A**: ç”Ÿæˆçš„æ•°æ®æ¨¡æ‹Ÿäº†çœŸå®ä½¿ç”¨åœºæ™¯ï¼š
- æœ‰æ—¶é—´è¶‹åŠ¿ï¼ˆç™½å¤©å¤šã€å¤œé—´å°‘ï¼‰
- æœ‰å¢é•¿è¶‹åŠ¿ï¼ˆè¶Šè¿‘æœŸè¶Šå¤šï¼‰
- æœ‰åˆç†çš„å¤±è´¥ç‡å’Œå“åº”æ—¶é—´åˆ†å¸ƒ
- ç«¯ç‚¹ä½¿ç”¨ç¬¦åˆå®é™…æ¯”ä¾‹

## ä¸‹ä¸€æ­¥

æ•°æ®åº“è®¾ç½®å®Œæˆåï¼Œä½ å¯ä»¥ï¼š

1. âœ… æŸ¥çœ‹æ¼‚äº®çš„ç»Ÿè®¡æ•°æ®
2. âœ… åœ¨ x402scan ä¸Šå±•ç¤ºä½ çš„æœåŠ¡æŒ‡æ ‡
3. âœ… å‘ç”¨æˆ·å±•ç¤ºæœåŠ¡çš„å¯é æ€§
4. âœ… åŸºäºå†å²æ•°æ®ä¼˜åŒ–æœåŠ¡

ç¥ä½ ä½¿ç”¨æ„‰å¿«ï¼ğŸ‰
